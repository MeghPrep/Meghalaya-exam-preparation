<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paper Selection</title>
<style>
:root {
  --bg: #0A0A0A;
  --card: #1C1C1C;
  --blue: #1976D2;
  --gold: #FFD700;
  --text: #FFFFFF;
  --muted: #AAAAAA;
  --hover: #333;
}

* { box-sizing:border-box; margin:0; padding:0; font-family: Arial,sans-serif; }

body { background: var(--bg); color: var(--text); min-height:100vh; }

.container { max-width: 960px; margin:auto; padding:20px; }

.page-header { text-align:center; margin-bottom:20px; }
.page-title { font-size:32px; color: var(--gold); margin-bottom:6px; }
.page-subtitle { font-size:16px; color: var(--muted); }

.card {
  background: var(--card);
  border-radius:12px;
  padding:16px;
  margin-bottom:16px;
  cursor:pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}
.card:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(0,0,0,0.5); }

.btn { background: var(--blue); border:none; color: var(--text); padding:8px 14px; border-radius:8px; cursor:pointer; margin-bottom:12px; }
.btn:hover { background:#0d47a1; }

.muted { color: var(--muted); font-size:14px; }
.flex { display:flex; gap:12px; flex-wrap:wrap; }
.items-center { align-items:center; }

@media(max-width:768px){
  .page-title{ font-size:24px; }
  .card{ padding:12px; }
}
</style>
</head>
<body>
<div class="container">

  <button class="btn" onclick="goBack()">
    &#8592; Back to Categories
  </button>

  <div class="page-header">
    <h1 class="page-title" id="categoryName">Category Name</h1>
    <p class="page-subtitle">Select a question paper to begin</p>
  </div>

  <div id="papersContainer"></div>

</div>

<script>
const urlParams = new URLSearchParams(window.location.search);
const categoryId = urlParams.get('categoryId');
const mode = urlParams.get('mode');

function goBack() {
  window.location.href = 'CategorySelection.html?mode=' + mode;
}

// Fetch categories and papers from localStorage
let categories = JSON.parse(localStorage.getItem('categories')) || [];
let papersObj = JSON.parse(localStorage.getItem('papers')) || {};

let category = categories.find(c => c.id === categoryId);
document.getElementById('categoryName').textContent = category ? category.name : 'Category';

let papers = papersObj[categoryId] || [];

const container = document.getElementById('papersContainer');

if(papers.length === 0){
  const card = document.createElement('div');
  card.className = 'card';
  card.innerHTML = `<div class="muted text-center">No question papers available yet</div>`;
  container.appendChild(card);
}else{
  papers.forEach(paper => {
    const card = document.createElement('div');
    card.className = 'card';
    card.onclick = () => {
      alert('Start quiz: '+ paper.name + ' (' + mode + ' mode)'); 
      // replace with actual quiz navigation when implemented
    };
    card.innerHTML = `
      <h3 style="margin-bottom:8px; font-size:20px;">${paper.name}</h3>
      <div class="muted mb-1">${paper.description}</div>
      <div class="flex items-center mt-2">
        <div class="flex items-center gap-1"><span class="muted">üìù ${paper.questionCount} Questions</span></div>
        <div class="flex items-center gap-1"><span class="muted">‚è± ${paper.duration} minutes</span></div>
        <div class="muted">Total Marks: ${paper.totalMarks}</div>
      </div>
    `;
    container.appendChild(card);
  });
}
</script>
</body>
</html>